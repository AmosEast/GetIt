# 操作系统总结
- __概述__
	- 三种类型：批处理系统，分时系统，实时系统
	- 四大特征：并发性，共享性，虚拟技术，异步性
	- 五大功能：
		1.	处理器管理功能：进程控制、进程同步、进程通信、调度
		2.	存储器管理功能：内存分配、内存保护、地址映射、内存扩充
		3.	设备管理功能：缓冲管理、设备分配、设备处理
		4.	文件管理功能：文件存储空间的管理、目录管理、文件的读写管理和保护
		5.	操作系统与用户之间的接口：用户接口、程序接口
- __进程管理__
	- 进程的特征和状态（未引入线程时的介绍）
		1.	结构特征：由程序段、相关的数据段和PCB（进程控制块）三部分构成了进程实体（也叫进程映像）
		2.	动态性：进程的实质是进程实体的一次执行过程，==动态性是进程最基本的特征==，表现在“它由创建而产生，由调度而执行，由撤销而消亡”
		3.	并发性：多个进程实体同存于内存中，且能在一段时间内同时执行
		4.	独立性：独立性是指进程实体是一个能独立运行、独立分配资源和独立接受调度的基本单位
		5.	异步性：进程实体是按异步方式运行。
	- 定义：传统os中的进程定义为：“进程是进程实体的运行过程，是系统进程资源分配和调度的一个独立单位”
	- 进程的状态和转换
		1.	三种基本状态（进程实体均在内存中）：就绪、执行、阻塞
		2.	基本状态转换图
		![ ](./基本状态转换图.png  "基本状态转换图")
			- ==注意==
				1.	不可能发生的状态转换：就绪  ===》阻塞
				2.	一般不可能的状态转换：阻塞  ===》执行
		3.	其他状态
			1.	挂起状态：将进程实体放在外存，即硬盘上
			2.	创建状态：申请空白PCB，为新进程分配资源，初始化进程控制块，将新进程插入就绪队列
			3.	终止状态：首先等待操作系统进行善后处理，然后将其PCB清零
		4.	状态转换图
		![ ](./进程状态转换图全.png "状态装换图（全）")
	- ==进程同步==
		- 同步机制应遵循的规则：空闲让进、忙则等待、有限等待、让权等待
		- 信号量机制
		- 管程机制
	- ==进程通信==
		1.	共享存储器系统：相互通信的进程共享某些数据结构或共享存储区来进行通信
		2.	消息传递系统：进程见的数据交换是以格式化的消息为单位的
		3.	管道通信系统：所谓”管道“，是指用于连接一个读进程和一个写进程来实现他们之间通信的一个文件，又名pipe文件。
	- ==线程==
		- 线程VS进程
			1.	调度：线程作为调度和分派的基本单位，而进程作为资源拥有的基本单位
			2.	并发性：在引入线程的操作系统中，不仅进程之间可以并发执行，而且在一个进程的多个线程之间也可并发执行，使得操作系统具有更好的并发性
			3.	拥有资源：进程可以拥有资源，是系统中拥有资源的一个基本单位，一般而言，线程自己不拥有系统资源，但可以访问其隶属进程的资源。
			4.	系统开销：创建、撤销和切换时，进程的系统开销一般高于线程，由于进程需要资源的分配回收保存等操作。
		- 线程的属性
			1.	轻型实体。基本上不拥有系统资源
			2.	独立调度和分派的基本单位。
			3.	可并发执行
			4.	可共享进程资源
		- 多线程OS中的进程
			1.	作为系统资源分配的单位
			2.	可包括多个线程
			3.	进程不是一个可执行的实体
		- 线程间的同步与通信
			- 互斥锁
			- 条件变量
			- 信号量机制
- __处理机调度和死锁__
	- 高级调度（又称为长程调度或作业调度）：把外存上处于后备队列中的那些作业调入内存。在==批处理系统中较为常用==，然而，在分时系统中，用户输入的命令或者数据都是被直接送入内存的，因此无需作业调度，而实时系统也不需要
	- 低级调度（又称为短程调度或进程调度）：调度对象为进程，决定就绪队列中的哪个进程应该获得处理机。  
	功能有：
		1.	保存处理机的现场信息
		2.	按某种算法选取进程
		3.	把处理器分配给进程
	进程调度的方式：
		1.	非抢占方式（适用于大多数的批处理系统环境）
		2.	抢占方式（特别是能满足对响应时间有着较严要求的实时任务的需求，主要基于优先权原则、短作业（进程）优先原则和时间片原则）
	- 中级调度（又称中程调度）：就是挂起和激活
	- 调度算法
		1.	先来先服务调度算法（FCFS）：有利于长作业，但是不利于短作业
		2.	短作业（进程）优先调度算法（SJF）：对长作业不利，完全未考虑作业的紧迫程度
		3.	高优先权调度算法：分为非抢占式优先权算法和抢占式优先权调度算法
		优先权的类型：
			1.	静态优先权
			2.	动态优先权
		高响应比优先调度算法：优先权 = （等待时间 + 要求服务时间）/ 要求服务时间
		4.	基于时间片的轮转算法
			1.	时间片轮转法
			2.	多级反馈队列调度算法
	- 实时调度
	常见的几种实时调度算法
		1.	最早截止时间优先即EOF算法
		2.	最低松弛度优先即LLF算法（松弛度：例如一个任务必须在200ms内完成，而他的执行时间是100ms，则他的松弛度是100ms）
	- 产生死锁的原因和必要条件
		- 产生死锁的原因：竞争资源、进程间推进顺序非法
		- 产生死锁的必要条件：互斥条件、请求和保持条件、不剥夺条件、环路等待条件
		- 处理死锁的基本方法：
			1.	预防死锁：去破坏产生死锁的四个必要条件中的一个或几个条件，来预防死锁
			2.	避免死锁：用某种方法去防止系统进入不安全状态，从而避免发生死锁
			3.	检测死锁：通过系统的检测机构检测出死锁的发生，并将已发生的死锁清除掉
			4.	解除死锁：
		- 预防死锁的发生：==银行家算法==
		- 死锁的检测：（有点复杂，没仔细看了）
		- 死锁的解除：剥夺资源，撤销进程
- 存储器管理
	- 通用计算机存储层次至少应具有三级：最高层为CPU寄存器，中间为主存（包括告诉缓存、主存和磁盘缓存），最底层为辅存（包括磁盘和可移动存储介质）
	- 将用户源程序装入内存需要的步骤：
		1.	编译，由编译程序将用户源代码编译成若干个目标模块；
		2.	链接，由链接程序将编译后形成的一组目标模块，以及它们所需要的库函数链接在一起，形成一个完整的装入模块；
		3.	装入，由装入程序将装入模块装入内存。
	- 程序的装入
		1.	绝对装入方式：将目标模块装入到内存中事先指定的位置，只适用于单道程序环境
		2.	可重定位装入方式：会产生装入模块中的所有逻辑地址与实际地址不同的问题。通常是把在装入时对目标程序中指令和数据的修改过程称为重定位，又因为地址变换通常是在装入是一次完成的，以后不在改变，固称为静态重定位。
		3.	动态运行时装入方式：在程序真正要执行时才将装入模块中的相对地址转换为绝对地址
	- 程序的链接
		1.	静态链接
		2.	装入时动态链接
		3.	运行时动态链接
	- 连续分配方式：是指为一个用户程序分配一个连续的内存空间
		1.	单一连续分配：只能用于单用户、单任务的操作系统中
		2.	固定分区分配
		3.	动态分区分配
			1.	分区分配中的数据结构：空闲分区表、空闲分区链
			2.	分区分配算法：
				1.	首次适应算法（FF）：空闲分区链以地址递增的次序链接，优先利用内存中低址部分的空闲分区
				2.	循环首次适应算法（NF）：从上次找到的空闲分区的下一个空闲分区开始查找
				3.	最佳适应算法（bf）：总是把能够满足要求、又是最小的空闲分区分配给作业
				4.	最坏适应算法（wf）：挑选一个最大的空闲区分配给作业使用。
				5.	快速适应算法（qf）：又称分类搜索法，将空闲分区根据其容量大小进行分类，对于每一类具有相同容量的所有空闲分区，单独设立一个空闲分区链表，方便查找。
		4.	伙伴系统
	- 可重定位分区分配：可以将原来多个分散的小分区，拼接成一个大分区
	- 对换：把内存中暂时不能运行的或者暂时不用的程序和数据调出到外存上，以便腾出足够的内存空间，再把已具备运行条件的进程或进程所需要的程序和数据调入内存
	- ==分页和分段的区别==
		1.	页是信息的物理单位，是为实现离散分配方式，以消减内存的外零头，提高内存的利用率。段是信息的逻辑单位，它含有一组其意义相对完整的信息，分段的目的是为了更好的满足用户的需求。
		2.	页的大小固定且由系统决定，段的长度不固定，决定于用户所编写的程序，通常由编译程序在对源程序进行编译时，根据信息的性质来划分。
		3.	分页的作业地址空间是一维的，即单一的线性地址空间，程序员只需利用一个记忆符，即可表示一个地址；而分段的作业空间是二维的，程序员在标识一个地址时，既须给出段名，又须给出段内地址。
- __设备管理__
	- 磁盘调度算法
		1.	先来先服务
		2.	最短寻道时间优先
		3.	扫描算法
		4.	循环扫描算法
	- 提高磁盘I/O速度的其他方法：提前读、延迟写、优化物理块的分布、虚拟盘
- __文件管理__

	

		
				